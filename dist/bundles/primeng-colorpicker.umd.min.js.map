{"version":3,"sources":["ng://primeng/colorpicker/colorpicker.ts"],"names":["COLORPICKER_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","ColorPicker","multi","el","renderer","cd","this","format","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","onChange","EventEmitter","defaultColor","onModelChange","onModelTouched","Object","defineProperty","prototype","element","colorSelectorViewChild","colorHandleViewChild","hueViewChild","hueHandleViewChild","onHueMousedown","event","disabled","bindDocumentMousemoveListener","bindDocumentMouseupListener","hueDragging","pickHue","top","nativeElement","getBoundingClientRect","window","pageYOffset","document","documentElement","scrollTop","body","value","validateHSB","h","Math","floor","max","min","pageY","s","b","updateColorSelector","updateUI","updateModel","emit","originalEvent","getValueToUpdate","onColorMousedown","colorDragging","pickColor","rect","left","scrollLeft","saturation","pageX","brightness","val","HSBtoHEX","HSBtoRGB","writeValue","HEXtoHSB","RGBtoHSB","hsb","style","backgroundColor","inputBgColor","onInputFocus","show","overlayVisible","onOverlayAnimationStart","toState","inline","overlay","appendOverlay","zIndex","String","DomHandler","zindex","alignOverlay","bindDocumentClickListener","onOverlayHide","appendTo","appendChild","restoreOverlayAppend","absolutePosition","inputViewChild","relativePosition","hide","onInputClick","selfClick","togglePanel","onInputKeydown","which","preventDefault","onPanelClick","registerOnChange","fn","registerOnTouched","setDisabledState","_this","documentClickListener","listen","unbindDocumentClickListener","markForCheck","documentMousemoveListener","unbindDocumentMousemoveListener","documentMouseupListener","unbindDocumentMouseupListener","validateRGB","rgb","r","g","validateHEX","hex","len","length","o","i","push","join","HEXtoRGB","hexValue","parseInt","indexOf","substring","delta","v","t1","t2","t3","round","RGBtoHEX","toString","key","ngOnDestroy","ElementRef","Renderer2","ChangeDetectorRef","__decorate","Input","Output","ViewChild","Component","selector","template","animations","trigger","state","transform","opacity","transition","animate","providers","changeDetection","ChangeDetectionStrategy","Default","ColorPickerModule","NgModule","imports","CommonModule","exports","declarations"],"mappings":"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","sourcesContent":["import { NgModule, Component, ElementRef, Input, Output, OnDestroy, EventEmitter, forwardRef, Renderer2, ViewChild, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { trigger, state, style, transition, animate, AnimationEvent } from '@angular/animations';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DomHandler } from 'primeng/dom';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\r\n\r\nexport const COLORPICKER_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => ColorPicker),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'p-colorPicker',\r\n    template: `\r\n        <div [ngStyle]=\"style\" [class]=\"styleClass\" [ngClass]=\"{'ui-colorpicker ui-widget':true,'ui-colorpicker-overlay':!inline,'ui-colorpicker-dragging':colorDragging||hueDragging}\">\r\n            <input #input type=\"text\" *ngIf=\"!inline\" class=\"ui-colorpicker-preview ui-inputtext ui-state-default ui-corner-all\" readonly=\"readonly\" [ngClass]=\"{'ui-state-disabled': disabled}\"\r\n                (focus)=\"onInputFocus()\" (click)=\"onInputClick()\" (keydown)=\"onInputKeydown($event)\" [attr.id]=\"inputId\" [attr.tabindex]=\"tabindex\" [disabled]=\"disabled\"\r\n                [style.backgroundColor]=\"inputBgColor\">\r\n            <div *ngIf=\"inline || overlayVisible\" [ngClass]=\"{'ui-colorpicker-panel ui-corner-all': true, 'ui-colorpicker-overlay-panel ui-shadow':!inline, 'ui-state-disabled': disabled}\" (click)=\"onPanelClick()\"\r\n                [@overlayAnimation]=\"{value: 'visible', params: {showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions}}\" [@.disabled]=\"inline === true\" (@overlayAnimation.start)=\"onOverlayAnimationStart($event)\">\r\n                <div class=\"ui-colorpicker-content\">\r\n                    <div #colorSelector class=\"ui-colorpicker-color-selector\" (mousedown)=\"onColorMousedown($event)\">\r\n                        <div class=\"ui-colorpicker-color\">\r\n                            <div #colorHandle class=\"ui-colorpicker-color-handle\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div #hue class=\"ui-colorpicker-hue\" (mousedown)=\"onHueMousedown($event)\">\r\n                        <div #hueHandle class=\"ui-colorpicker-hue-handle\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    animations: [\r\n        trigger('overlayAnimation', [\r\n            state('void', style({\r\n                transform: 'translateY(5%)',\r\n                opacity: 0\r\n            })),\r\n            state('visible', style({\r\n                transform: 'translateY(0)',\r\n                opacity: 1\r\n            })),\r\n            transition('void => visible', animate('{{showTransitionParams}}')),\r\n            transition('visible => void', animate('{{hideTransitionParams}}'))\r\n        ])\r\n    ],\r\n    providers: [COLORPICKER_VALUE_ACCESSOR],\r\n    changeDetection: ChangeDetectionStrategy.Default\r\n})\r\nexport class ColorPicker implements ControlValueAccessor, OnDestroy {\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    @Input() inline: boolean;\r\n    \r\n    @Input() format: string = 'hex';\r\n    \r\n    @Input() appendTo: string;\r\n    \r\n    @Input() disabled: boolean;\r\n    \r\n    @Input() tabindex: string;\r\n    \r\n    @Input() inputId: string;\r\n\r\n    @Input() autoZIndex: boolean = true;\r\n    \r\n    @Input() baseZIndex: number = 0;\r\n\r\n    @Input() showTransitionOptions: string = '225ms ease-out';\r\n\r\n    @Input() hideTransitionOptions: string = '195ms ease-in';\r\n    \r\n    @Output() onChange: EventEmitter<any> = new EventEmitter();\r\n    \r\n    @ViewChild('input') inputViewChild: ElementRef;\r\n    \r\n    value: any;\r\n    \r\n    inputBgColor: string;\r\n    \r\n    shown: boolean;\r\n    \r\n    overlayVisible: boolean;\r\n    \r\n    defaultColor: string = 'ff0000';\r\n    \r\n    onModelChange: Function = () => {};\r\n    \r\n    onModelTouched: Function = () => {};\r\n    \r\n    documentClickListener: Function;\r\n    \r\n    documentMousemoveListener: Function;\r\n    \r\n    documentMouseupListener: Function;\r\n    \r\n    documentHueMoveListener: Function;\r\n                \r\n    selfClick: boolean;\r\n    \r\n    colorDragging: boolean;\r\n    \r\n    hueDragging: boolean;\r\n\r\n    overlay: HTMLDivElement;\r\n\r\n    colorSelectorViewChild: ElementRef;\r\n    \r\n    colorHandleViewChild: ElementRef;\r\n    \r\n    hueViewChild: ElementRef;\r\n    \r\n    hueHandleViewChild: ElementRef;\r\n                \r\n    constructor(public el: ElementRef, public renderer: Renderer2, public cd: ChangeDetectorRef) {}\r\n        \r\n    @ViewChild('colorSelector') set colorSelector(element: ElementRef) {\r\n        this.colorSelectorViewChild = element;\r\n    }\r\n\r\n    @ViewChild('colorHandle') set colorHandle(element: ElementRef) {\r\n        this.colorHandleViewChild = element;\r\n    }\r\n\r\n    @ViewChild('hue') set hue(element: ElementRef) {\r\n        this.hueViewChild = element;\r\n    }\r\n\r\n    @ViewChild('hueHandle') set hueHandle(element: ElementRef) {\r\n        this.hueHandleViewChild = element;\r\n    }\r\n\r\n    onHueMousedown(event: MouseEvent) {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        this.bindDocumentMousemoveListener();\r\n        this.bindDocumentMouseupListener();\r\n        \r\n        this.hueDragging = true;\r\n        this.pickHue(event);\r\n    }\r\n    \r\n    pickHue(event: MouseEvent) {\r\n        let top: number = this.hueViewChild.nativeElement.getBoundingClientRect().top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        this.value = this.validateHSB({\r\n            h: Math.floor(360 * (150 - Math.max(0, Math.min(150, (event.pageY - top)))) / 150),\r\n            s: this.value.s,\r\n            b: this.value.b\r\n        });\r\n        \r\n        this.updateColorSelector();\r\n        this.updateUI();\r\n        this.updateModel();\r\n        this.onChange.emit({originalEvent: event, value: this.getValueToUpdate()});\r\n    }\r\n    \r\n    onColorMousedown(event: MouseEvent) {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        this.bindDocumentMousemoveListener();\r\n        this.bindDocumentMouseupListener();\r\n        \r\n        this.colorDragging = true;\r\n        this.pickColor(event);\r\n    }\r\n    \r\n    pickColor(event: MouseEvent) {\r\n        let rect = this.colorSelectorViewChild.nativeElement.getBoundingClientRect();\r\n        let top = rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        let left = rect.left + document.body.scrollLeft;\r\n        let saturation = Math.floor(100 * (Math.max(0, Math.min(150, (event.pageX - left)))) / 150);\r\n        let brightness = Math.floor(100 * (150 - Math.max(0, Math.min(150, (event.pageY - top)))) / 150);\r\n        this.value = this.validateHSB({\r\n            h: this.value.h,\r\n            s: saturation,\r\n            b: brightness\r\n        });\r\n        \r\n        this.updateUI();\r\n        this.updateModel();\r\n        this.onChange.emit({originalEvent: event, value: this.getValueToUpdate()});\r\n    }\r\n    \r\n    getValueToUpdate() {\r\n        let val: any;\r\n        switch(this.format) {\r\n            case 'hex':\r\n                val = '#' + this.HSBtoHEX(this.value);\r\n            break;\r\n            \r\n            case 'rgb':\r\n                val = this.HSBtoRGB(this.value);\r\n            break;\r\n            \r\n            case 'hsb':\r\n                val = this.value;\r\n            break;\r\n        }\r\n        \r\n        return val;\r\n    }\r\n    \r\n    updateModel(): void {\r\n        this.onModelChange(this.getValueToUpdate());\r\n    }\r\n\r\n    writeValue(value: any): void {\r\n        if (value) {\r\n            switch(this.format) {\r\n                case 'hex':\r\n                    this.value = this.HEXtoHSB(value);\r\n                break;\r\n                \r\n                case 'rgb':\r\n                    this.value = this.RGBtoHSB(value);\r\n                break;\r\n                \r\n                case 'hsb':\r\n                    this.value = value;\r\n                break;\r\n            }\r\n        }\r\n        else {\r\n            this.value = this.HEXtoHSB(this.defaultColor);\r\n        }\r\n        \r\n        this.updateColorSelector();\r\n        this.updateUI();\r\n    }\r\n    \r\n    updateColorSelector() {\r\n        if (this.colorSelectorViewChild) {\r\n            const hsb: any = {};\r\n            hsb.s = 100;\r\n            hsb.b = 100;\r\n            hsb.h = this.value.h;\r\n\r\n            this.colorSelectorViewChild.nativeElement.style.backgroundColor = '#' + this.HSBtoHEX(hsb);\r\n        }\r\n    }\r\n        \r\n    updateUI() {\r\n        if (this.colorHandleViewChild && this.hueHandleViewChild.nativeElement) {\r\n            this.colorHandleViewChild.nativeElement.style.left =  Math.floor(150 * this.value.s / 100) + 'px';\r\n            this.colorHandleViewChild.nativeElement.style.top =  Math.floor(150 * (100 - this.value.b) / 100) + 'px';\r\n            this.hueHandleViewChild.nativeElement.style.top = Math.floor(150 - (150 * this.value.h / 360)) + 'px';\r\n\r\n        }\r\n\r\n        this.inputBgColor = '#' + this.HSBtoHEX(this.value);\r\n    }\r\n    \r\n    onInputFocus() {\r\n        this.onModelTouched();\r\n    }\r\n    \r\n    show() {\r\n        this.overlayVisible = true;\r\n    }\r\n\r\n    onOverlayAnimationStart(event: AnimationEvent) {\r\n        switch(event.toState) {\r\n            case 'visible':\r\n                if (!this.inline) {\r\n                    this.overlay = event.element;\r\n                    this.appendOverlay();\r\n                    if (this.autoZIndex) {\r\n                        this.overlay.style.zIndex = String(this.baseZIndex + (++DomHandler.zindex));\r\n                    }\r\n                    this.alignOverlay();\r\n                    this.bindDocumentClickListener();\r\n\r\n                    this.updateColorSelector();\r\n                    this.updateUI();\r\n                }\r\n            break;\r\n\r\n            case 'void':\r\n                this.onOverlayHide();\r\n            break;\r\n        }\r\n    }\r\n\r\n    appendOverlay() {\r\n        if (this.appendTo) {\r\n            if (this.appendTo === 'body')\r\n                document.body.appendChild(this.overlay);\r\n            else\r\n                DomHandler.appendChild(this.overlay, this.appendTo);\r\n        }\r\n    }\r\n\r\n    restoreOverlayAppend() {\r\n        if (this.overlay && this.appendTo) {\r\n            this.el.nativeElement.appendChild(this.overlay);\r\n        }\r\n    }\r\n    \r\n    alignOverlay() {\r\n        if (this.appendTo)\r\n            DomHandler.absolutePosition(this.overlay, this.inputViewChild.nativeElement);\r\n        else\r\n            DomHandler.relativePosition(this.overlay, this.inputViewChild.nativeElement);\r\n    }\r\n    \r\n    hide() {\r\n        this.overlayVisible = false;\r\n    }\r\n         \r\n    onInputClick() {\r\n        this.selfClick = true;\r\n        this.togglePanel();\r\n    }\r\n    \r\n    togglePanel() {\r\n        if (!this.overlayVisible)\r\n            this.show();\r\n        else\r\n            this.hide();\r\n    }\r\n    \r\n    onInputKeydown(event: KeyboardEvent) {\r\n        switch(event.which) {\r\n            //space\r\n            case 32:\r\n                this.togglePanel();\r\n                event.preventDefault();\r\n            break;\r\n                        \r\n            //escape and tab\r\n            case 27:\r\n            case 9:\r\n                this.hide();\r\n            break;\r\n        }\r\n    }\r\n        \r\n    onPanelClick() {\r\n        this.selfClick = true;\r\n    }\r\n    \r\n    registerOnChange(fn: Function): void {\r\n        this.onModelChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: Function): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    \r\n    setDisabledState(val: boolean): void {\r\n        this.disabled = val;\r\n    }\r\n    \r\n    bindDocumentClickListener() {\r\n        if (!this.documentClickListener) {\r\n            this.documentClickListener = this.renderer.listen('document', 'click', () => {\r\n                if (!this.selfClick) {\r\n                    this.overlayVisible = false;\r\n                    this.unbindDocumentClickListener();\r\n                }\r\n                \r\n                this.selfClick = false;\r\n                this.cd.markForCheck();\r\n            });\r\n        }    \r\n    }\r\n    \r\n    unbindDocumentClickListener() {\r\n        if (this.documentClickListener) {\r\n            this.documentClickListener();\r\n            this.documentClickListener = null;\r\n        }\r\n    }\r\n    \r\n    bindDocumentMousemoveListener() {\r\n        if (!this.documentMousemoveListener) {\r\n            this.documentMousemoveListener = this.renderer.listen('document', 'mousemove', (event: MouseEvent) => {\r\n                if (this.colorDragging) {\r\n                    this.pickColor(event);\r\n                }\r\n                \r\n                if (this.hueDragging) {\r\n                    this.pickHue(event);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    unbindDocumentMousemoveListener() {\r\n        if (this.documentMousemoveListener) {\r\n            this.documentMousemoveListener();\r\n            this.documentMousemoveListener = null;\r\n        }\r\n    }\r\n    \r\n    bindDocumentMouseupListener() {\r\n        if (!this.documentMouseupListener) {\r\n            this.documentMouseupListener = this.renderer.listen('document', 'mouseup', () => {\r\n                this.colorDragging = false;\r\n                this.hueDragging = false;\r\n                this.unbindDocumentMousemoveListener();\r\n                this.unbindDocumentMouseupListener();\r\n            });\r\n        }\r\n    }\r\n    \r\n    unbindDocumentMouseupListener() {\r\n        if (this.documentMouseupListener) {\r\n            this.documentMouseupListener();\r\n            this.documentMouseupListener = null;\r\n        }\r\n    }\r\n\r\n    validateHSB(hsb) {\r\n        return {\r\n            h: Math.min(360, Math.max(0, hsb.h)),\r\n            s: Math.min(100, Math.max(0, hsb.s)),\r\n            b: Math.min(100, Math.max(0, hsb.b))\r\n        };\r\n    }\r\n    \r\n    validateRGB(rgb) {\r\n        return {\r\n            r: Math.min(255, Math.max(0, rgb.r)),\r\n            g: Math.min(255, Math.max(0, rgb.g)),\r\n            b: Math.min(255, Math.max(0, rgb.b))\r\n        };\r\n    }\r\n    \r\n    validateHEX(hex) {\r\n        var len = 6 - hex.length;\r\n        if (len > 0) {\r\n            var o = [];\r\n            for (var i=0; i<len; i++) {\r\n                o.push('0');\r\n            }\r\n            o.push(hex);\r\n            hex = o.join('');\r\n        }\r\n        return hex;\r\n    }\r\n    \r\n    HEXtoRGB(hex) {\r\n        let hexValue = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\r\n        return {r: hexValue >> 16, g: (hexValue & 0x00FF00) >> 8, b: (hexValue & 0x0000FF)};\r\n    }\r\n    \r\n    HEXtoHSB(hex) {\r\n        return this.RGBtoHSB(this.HEXtoRGB(hex));\r\n    }\r\n    \r\n    RGBtoHSB(rgb) {\r\n        var hsb = {\r\n            h: 0,\r\n            s: 0,\r\n            b: 0\r\n        };\r\n        var min = Math.min(rgb.r, rgb.g, rgb.b);\r\n        var max = Math.max(rgb.r, rgb.g, rgb.b);\r\n        var delta = max - min;\r\n        hsb.b = max;\r\n        hsb.s = max != 0 ? 255 * delta / max : 0;\r\n        if (hsb.s != 0) {\r\n            if (rgb.r == max) {\r\n                hsb.h = (rgb.g - rgb.b) / delta;\r\n            } else if (rgb.g == max) {\r\n                hsb.h = 2 + (rgb.b - rgb.r) / delta;\r\n            } else {\r\n                hsb.h = 4 + (rgb.r - rgb.g) / delta;\r\n            }\r\n        } else {\r\n            hsb.h = -1;\r\n        }\r\n        hsb.h *= 60;\r\n        if (hsb.h < 0) {\r\n            hsb.h += 360;\r\n        }\r\n        hsb.s *= 100/255;\r\n        hsb.b *= 100/255;\r\n        return hsb;\r\n    }\r\n    \r\n    HSBtoRGB(hsb) {\r\n        var rgb = {\r\n            r: null, g: null, b: null\r\n        };\r\n        let h: number = hsb.h;\r\n        let s: number = hsb.s*255/100;\r\n        let v: number = hsb.b*255/100;\r\n        if (s == 0) {\r\n            rgb = {\r\n                r: v,\r\n                g: v,\r\n                b: v\r\n            }\r\n        } \r\n        else {\r\n            let t1: number = v;\r\n            let t2: number = (255-s)*v/255;\r\n            let t3: number = (t1-t2)*(h%60)/60;\r\n            if (h==360) h = 0;\r\n            if (h<60) {rgb.r=t1;\trgb.b=t2; rgb.g=t2+t3}\r\n            else if (h<120) {rgb.g=t1; rgb.b=t2;\trgb.r=t1-t3}\r\n            else if (h<180) {rgb.g=t1; rgb.r=t2;\trgb.b=t2+t3}\r\n            else if (h<240) {rgb.b=t1; rgb.r=t2;\trgb.g=t1-t3}\r\n            else if (h<300) {rgb.b=t1; rgb.g=t2;\trgb.r=t2+t3}\r\n            else if (h<360) {rgb.r=t1; rgb.g=t2;\trgb.b=t1-t3}\r\n            else {rgb.r=0; rgb.g=0;\trgb.b=0}\r\n        }\r\n        return {r:Math.round(rgb.r), g:Math.round(rgb.g), b:Math.round(rgb.b)};\r\n    }\r\n    \r\n    RGBtoHEX(rgb) {\r\n        var hex = [\r\n            rgb.r.toString(16),\r\n            rgb.g.toString(16),\r\n            rgb.b.toString(16)\r\n        ];\r\n        \r\n        for(var key in hex) {\r\n            if (hex[key].length == 1) {\r\n                hex[key] = '0' + hex[key];\r\n            }\r\n        }        \r\n\r\n        return hex.join('');\r\n    }\r\n    \r\n    HSBtoHEX(hsb) {\r\n        return this.RGBtoHEX(this.HSBtoRGB(hsb));\r\n    }\r\n\r\n    onOverlayHide() {\r\n        this.unbindDocumentClickListener();\r\n        this.overlay = null;\r\n    }\r\n    \r\n    ngOnDestroy() {\r\n        this.restoreOverlayAppend();\r\n        this.onOverlayHide();\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [ColorPicker],\r\n    declarations: [ColorPicker]\r\n})\r\nexport class ColorPickerModule { }\r\n"]}