{"version":3,"sources":["ng://primeng/paginator/paginator.ts"],"names":["Paginator","cd","this","pageLinkSize","onPageChange","EventEmitter","alwaysShow","dropdownScrollHeight","currentPageReportTemplate","totalRecords","rows","_first","prototype","ngOnInit","updatePaginatorState","ngOnChanges","simpleChange","updatePageLinks","updateFirst","updateRowsPerPageOptions","first","currentValue","rowsPerPageOptions","Object","defineProperty","val","rowsPerPageItems","_b","__values","_c","next","done","opt","value","unshift","label","push","String","isFirstPage","getPage","isLastPage","getPageCount","Math","ceil","calculatePageLinkBoundaries","numberOfPages","visiblePages","min","start","max","end","delta","pageLinks","boundaries","i","changePage","p","pc","state","page","pageCount","emit","_this","Promise","resolve","then","floor","changePageToFirst","event","preventDefault","changePageToPrev","changePageToNext","changePageToLast","onPageLinkClick","onRppChange","paginatorState","replace","ChangeDetectorRef","__decorate","Input","Output","Component","selector","template","changeDetection","ChangeDetectionStrategy","Default","PaginatorModule","NgModule","imports","CommonModule","DropdownModule","FormsModule","SharedModule","exports","declarations"],"mappings":"gsCAAAA,EAAA,WAmFI,SAAAA,EAAoBC,GAAAC,KAAAD,GAAAA,EApCXC,KAAAC,aAAuB,EAEtBD,KAAAE,aAAkC,IAAIC,EAAAA,aAMvCH,KAAAI,YAAsB,EAQtBJ,KAAAK,qBAA+B,QAE/BL,KAAAM,0BAAoC,gCAIpCN,KAAAO,aAAuB,EAEvBP,KAAAQ,KAAe,EAUxBR,KAAAS,OAAiB,EA8KrB,OA1KIX,EAAAY,UAAAC,SAAA,WACIX,KAAKY,wBAGTd,EAAAY,UAAAG,YAAA,SAAYC,GACJA,EAAaP,eACbP,KAAKe,kBACLf,KAAKY,uBACLZ,KAAKgB,cACLhB,KAAKiB,4BAGLH,EAAaI,QACblB,KAAKS,OAASK,EAAaI,MAAMC,aACjCnB,KAAKe,kBACLf,KAAKY,wBAGLE,EAAaN,OACbR,KAAKe,kBACLf,KAAKY,wBAGLE,EAAaM,oBACbpB,KAAKiB,4BAIJI,OAAAC,eAAIxB,EAAAY,UAAA,QAAK,KAAT,WACL,OAAOV,KAAKS,YAEhB,SAAUc,GACNvB,KAAKS,OAASc,mCAGlBzB,EAAAY,UAAAO,yBAAA,mBACI,GAAIjB,KAAKoB,mBAAoB,CACzBpB,KAAKwB,iBAAmB,OACxB,IAAgB,IAAAC,EAAAC,EAAA1B,KAAKoB,oBAAkBO,EAAAF,EAAAG,QAAAD,EAAAE,KAAAF,EAAAF,EAAAG,OAAE,CAApC,IAAIE,EAAGH,EAAAI,MACU,iBAAPD,GAAmBA,EAAa,QACvC9B,KAAKwB,iBAAiBQ,QAAQ,CAACC,MAAOH,EAAa,QAAGC,MAAO/B,KAAKO,eAGlEP,KAAKwB,iBAAiBU,KAAK,CAACD,MAAOE,OAAOL,GAAMC,MAAOD,yGAMvEhC,EAAAY,UAAA0B,YAAA,WACI,OAA0B,IAAnBpC,KAAKqC,WAGhBvC,EAAAY,UAAA4B,WAAA,WACI,OAAOtC,KAAKqC,YAAcrC,KAAKuC,eAAiB,GAGpDzC,EAAAY,UAAA6B,aAAA,WACI,OAAOC,KAAKC,KAAKzC,KAAKO,aAAaP,KAAKQ,OAAO,GAGnDV,EAAAY,UAAAgC,4BAAA,WACI,IAAIC,EAAgB3C,KAAKuC,eACzBK,EAAeJ,KAAKK,IAAI7C,KAAKC,aAAc0C,GAGvCG,EAAQN,KAAKO,IAAI,EAAGP,KAAKC,KAAKzC,KAAKqC,UAAa,EAAiB,IACrEW,EAAMR,KAAKK,IAAIF,EAAgB,EAAGG,EAAQF,EAAe,GAGrDK,EAAQjD,KAAKC,cAAgB+C,EAAMF,EAAQ,GAG/C,MAAO,CAFPA,EAAQN,KAAKO,IAAI,EAAGD,EAAQG,GAEbD,IAGnBlD,EAAAY,UAAAK,gBAAA,WACIf,KAAKkD,UAAY,GAKjB,IAJA,IAAIC,EAAanD,KAAK0C,8BACtBI,EAAQK,EAAW,GACnBH,EAAMG,EAAW,GAETC,EAAIN,EAAOM,GAAKJ,EAAKI,IACzBpD,KAAKkD,UAAUhB,KAAKkB,EAAI,IAIhCtD,EAAAY,UAAA2C,WAAA,SAAWC,GACP,IAAIC,EAAKvD,KAAKuC,eAEd,GAAIe,GAAK,GAAKA,EAAIC,EAAI,CAClBvD,KAAKS,OAAST,KAAKQ,KAAO8C,EAC1B,IAAIE,EAAQ,CACRC,KAAMH,EACNpC,MAAOlB,KAAKkB,MACZV,KAAMR,KAAKQ,KACXkD,UAAWH,GAEfvD,KAAKe,kBAELf,KAAKE,aAAayD,KAAKH,GACvBxD,KAAKY,yBAIbd,EAAAY,UAAAM,YAAA,WAAA,IAAA4C,EAAA5D,KACUyD,EAAOzD,KAAKqC,UACdoB,EAAO,GAAKzD,KAAKO,cAAiBP,KAAKkB,OAASlB,KAAKO,cACrDsD,QAAQC,QAAQ,MAAMC,MAAK,WAAM,OAAAH,EAAKP,WAAWI,EAAO,OAIhE3D,EAAAY,UAAA2B,QAAA,WACI,OAAOG,KAAKwB,MAAMhE,KAAKkB,MAAQlB,KAAKQ,OAGxCV,EAAAY,UAAAuD,kBAAA,SAAkBC,GACXlE,KAAKoC,eACNpC,KAAKqD,WAAW,GAGpBa,EAAMC,kBAGRrE,EAAAY,UAAA0D,iBAAA,SAAiBF,GACblE,KAAKqD,WAAWrD,KAAKqC,UAAY,GACjC6B,EAAMC,kBAGVrE,EAAAY,UAAA2D,iBAAA,SAAiBH,GACblE,KAAKqD,WAAWrD,KAAKqC,UAAa,GAClC6B,EAAMC,kBAGVrE,EAAAY,UAAA4D,iBAAA,SAAiBJ,GACVlE,KAAKsC,cACNtC,KAAKqD,WAAWrD,KAAKuC,eAAiB,GAG1C2B,EAAMC,kBAGRrE,EAAAY,UAAA6D,gBAAA,SAAgBL,EAAOT,GACnBzD,KAAKqD,WAAWI,GAChBS,EAAMC,kBAGVrE,EAAAY,UAAA8D,YAAA,SAAYN,GACRlE,KAAKqD,WAAWrD,KAAKqC,YAGzBvC,EAAAY,UAAAE,qBAAA,WACIZ,KAAKyE,eAAiB,CAClBhB,KAAMzD,KAAKqC,UACXqB,UAAW1D,KAAKuC,eAChB/B,KAAMR,KAAKQ,KACXU,MAAOlB,KAAKkB,MACZX,aAAcP,KAAKO,eAI3Bc,OAAAC,eAAIxB,EAAAY,UAAA,oBAAiB,KAArB,WACI,OAAOV,KAAKM,0BACHoE,QAAQ,gBAAiBvC,OAAOnC,KAAKqC,UAAY,IACjDqC,QAAQ,eAAgBvC,OAAOnC,KAAKuC,iBACpCmC,QAAQ,UAAWvC,OAAOnC,KAAKS,OAAS,IACxCiE,QAAQ,SAAUvC,OAAOK,KAAKK,IAAI7C,KAAKS,OAAST,KAAKQ,KAAMR,KAAKO,gBAChEmE,QAAQ,SAAUvC,OAAOnC,KAAKQ,OAC9BkE,QAAQ,iBAAkBvC,OAAOnC,KAAKO,yFA1K3BoE,EAAAA,qBApCfC,EAAA,CAARC,EAAAA,4CAESD,EAAA,CAATE,EAAAA,6CAEQF,EAAA,CAARC,EAAAA,qCAEQD,EAAA,CAARC,EAAAA,0CAEQD,EAAA,CAARC,EAAAA,0CAEQD,EAAA,CAARC,EAAAA,4CAEQD,EAAA,CAARC,EAAAA,6CAEQD,EAAA,CAARC,EAAAA,gDAEQD,EAAA,CAARC,EAAAA,oDAEQD,EAAA,CAARC,EAAAA,yDAEQD,EAAA,CAARC,EAAAA,qDAEQD,EAAA,CAARC,EAAAA,4CAEQD,EAAA,CAARC,EAAAA,oCAEQD,EAAA,CAARC,EAAAA,kDAwCQD,EAAA,CAARC,EAAAA,mCApEQ/E,EAAS8E,EAAA,CAtCrBG,EAAAA,UAAU,CACPC,SAAU,cACVC,SAAU,okGAkCVC,gBAAiBC,EAAAA,wBAAwBC,WAEhCtF,GA7Cb,gBAsQA,SAAAuF,KAA+B,OAAlBA,EAAeT,EAAA,CAL3BU,EAAAA,SAAS,CACNC,QAAS,CAACC,EAAAA,aAAaC,EAAAA,eAAeC,EAAAA,YAAYC,EAAAA,cAClDC,QAAS,CAAC9F,EAAU2F,EAAAA,eAAeC,EAAAA,YAAYC,EAAAA,cAC/CE,aAAc,CAAC/F,MAENuF","sourcesContent":["import {NgModule,Component,OnInit,Input,Output,ChangeDetectorRef,EventEmitter,TemplateRef,OnChanges,SimpleChanges,ChangeDetectionStrategy} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {DropdownModule} from 'primeng/dropdown';\r\nimport {SelectItem} from 'primeng/api';\r\nimport {SharedModule} from 'primeng/api';\r\n\r\n@Component({\r\n    selector: 'p-paginator',\r\n    template: `\r\n        <div [class]=\"styleClass\" [ngStyle]=\"style\" [ngClass]=\"'ui-paginator ui-widget ui-widget-header ui-unselectable-text ui-helper-clearfix'\"\r\n            *ngIf=\"alwaysShow ? true : (pageLinks && pageLinks.length > 1)\">\r\n            <div class=\"ui-paginator-left-content\" *ngIf=\"templateLeft\">\r\n                <ng-container *ngTemplateOutlet=\"templateLeft; context: {$implicit: paginatorState}\"></ng-container>\r\n            </div>\r\n            <span class=\"ui-paginator-current\" *ngIf=\"showCurrentPageReport\">{{currentPageReport}}</span>\r\n            <a [attr.tabindex]=\"isFirstPage() ? null : '0'\" class=\"ui-paginator-first ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToFirst($event)\" (keydown.enter)=\"changePageToFirst($event)\" [ngClass]=\"{'ui-state-disabled':isFirstPage()}\" [tabindex]=\"isFirstPage() ? -1 : null\">\r\n                <span class=\"ui-paginator-icon pi pi-step-backward\"></span>\r\n            </a>\r\n            <a tabindex=\"0\" [attr.tabindex]=\"isFirstPage() ? null : '0'\" class=\"ui-paginator-prev ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToPrev($event)\" (keydown.enter)=\"changePageToPrev($event)\" [ngClass]=\"{'ui-state-disabled':isFirstPage()}\" [tabindex]=\"isFirstPage() ? -1 : null\">\r\n                <span class=\"ui-paginator-icon pi pi-caret-left\"></span>\r\n            </a>\r\n            <span class=\"ui-paginator-pages\">\r\n                <a tabindex=\"0\" *ngFor=\"let pageLink of pageLinks\" class=\"ui-paginator-page ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"onPageLinkClick($event, pageLink - 1)\" (keydown.enter)=\"onPageLinkClick($event, pageLink - 1)\" [ngClass]=\"{'ui-state-active': (pageLink-1 == getPage())}\">{{pageLink}}</a>\r\n            </span>\r\n            <a [attr.tabindex]=\"isLastPage() ? null : '0'\" class=\"ui-paginator-next ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToNext($event)\" (keydown.enter)=\"changePageToNext($event)\" [ngClass]=\"{'ui-state-disabled':isLastPage()}\" [tabindex]=\"isLastPage() ? -1 : null\">\r\n                <span class=\"ui-paginator-icon pi pi-caret-right\"></span>\r\n            </a>\r\n            <a [attr.tabindex]=\"isLastPage() ? null : '0'\" class=\"ui-paginator-last ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToLast($event)\" (keydown.enter)=\"changePageToLast($event)\" [ngClass]=\"{'ui-state-disabled':isLastPage()}\" [tabindex]=\"isLastPage() ? -1 : null\">\r\n                <span class=\"ui-paginator-icon pi pi-step-forward\"></span>\r\n            </a>\r\n            <p-dropdown [options]=\"rowsPerPageItems\" [(ngModel)]=\"rows\" *ngIf=\"rowsPerPageOptions\" \r\n                (onChange)=\"onRppChange($event)\" [appendTo]=\"dropdownAppendTo\" [scrollHeight]=\"dropdownScrollHeight\"></p-dropdown>\r\n            <div class=\"ui-paginator-right-content\" *ngIf=\"templateRight\">\r\n                <ng-container *ngTemplateOutlet=\"templateRight; context: {$implicit: paginatorState}\"></ng-container>\r\n            </div>\r\n        </div>\r\n    `,\r\n    changeDetection: ChangeDetectionStrategy.Default\r\n})\r\nexport class Paginator implements OnInit, OnChanges {\r\n\r\n    @Input() pageLinkSize: number = 5;\r\n\r\n    @Output() onPageChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n\r\n    @Input() alwaysShow: boolean = true;\r\n    \r\n    @Input() templateLeft: TemplateRef<any>;\r\n    \r\n    @Input() templateRight: TemplateRef<any>;\r\n\r\n    @Input() dropdownAppendTo: any;\r\n\r\n    @Input() dropdownScrollHeight: string = '200px';\r\n\r\n    @Input() currentPageReportTemplate: string = '{currentPage} of {totalPages}';\r\n\r\n    @Input() showCurrentPageReport: boolean;\r\n\r\n    @Input() totalRecords: number = 0;\r\n\r\n    @Input() rows: number = 0;\r\n    \r\n    @Input() rowsPerPageOptions: any[];\r\n\r\n    pageLinks: number[];\r\n\r\n    rowsPerPageItems: SelectItem[];\r\n    \r\n    paginatorState: any;\r\n\r\n    _first: number = 0;\r\n\r\n    constructor(private cd: ChangeDetectorRef) {}\r\n    \r\n    ngOnInit() {\r\n        this.updatePaginatorState();\r\n    }\r\n\r\n    ngOnChanges(simpleChange: SimpleChanges) {\r\n        if (simpleChange.totalRecords) {\r\n            this.updatePageLinks();\r\n            this.updatePaginatorState();\r\n            this.updateFirst();\r\n            this.updateRowsPerPageOptions();\r\n        }\r\n\r\n        if (simpleChange.first) {\r\n            this._first = simpleChange.first.currentValue;\r\n            this.updatePageLinks();\r\n            this.updatePaginatorState();\r\n        }\r\n\r\n        if (simpleChange.rows) {\r\n            this.updatePageLinks();\r\n            this.updatePaginatorState();\r\n        }\r\n\r\n        if (simpleChange.rowsPerPageOptions) {\r\n            this.updateRowsPerPageOptions();\r\n        }\r\n    }\r\n\r\n    @Input() get first(): number {\r\n        return this._first;\r\n    }\r\n    set first(val:number) {\r\n        this._first = val;\r\n    }\r\n\r\n    updateRowsPerPageOptions() {\r\n        if (this.rowsPerPageOptions) {\r\n            this.rowsPerPageItems = [];\r\n            for (let opt of this.rowsPerPageOptions) {\r\n                if (typeof opt == 'object' && opt['showAll']) {\r\n                    this.rowsPerPageItems.unshift({label: opt['showAll'], value: this.totalRecords});\r\n                }\r\n                else {\r\n                    this.rowsPerPageItems.push({label: String(opt), value: opt});\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    isFirstPage() {\r\n        return this.getPage() === 0;\r\n    }\r\n\r\n    isLastPage() {\r\n        return this.getPage() === this.getPageCount() - 1;\r\n    }\r\n\r\n    getPageCount() {\r\n        return Math.ceil(this.totalRecords/this.rows)||1;\r\n    }\r\n\r\n    calculatePageLinkBoundaries() {\r\n        let numberOfPages = this.getPageCount(),\r\n        visiblePages = Math.min(this.pageLinkSize, numberOfPages);\r\n\r\n        //calculate range, keep current in middle if necessary\r\n        let start = Math.max(0, Math.ceil(this.getPage() - ((visiblePages) / 2))),\r\n        end = Math.min(numberOfPages - 1, start + visiblePages - 1);\r\n\r\n        //check when approaching to last page\r\n        var delta = this.pageLinkSize - (end - start + 1);\r\n        start = Math.max(0, start - delta);\r\n\r\n        return [start, end];\r\n    }\r\n\r\n    updatePageLinks() {\r\n        this.pageLinks = [];\r\n        let boundaries = this.calculatePageLinkBoundaries(),\r\n        start = boundaries[0],\r\n        end = boundaries[1];\r\n\r\n        for(let i = start; i <= end; i++) {\r\n            this.pageLinks.push(i + 1);\r\n        }\r\n    }\r\n\r\n    changePage(p :number) {\r\n        var pc = this.getPageCount();\r\n\r\n        if (p >= 0 && p < pc) {\r\n            this._first = this.rows * p;\r\n            var state = {\r\n                page: p,\r\n                first: this.first,\r\n                rows: this.rows,\r\n                pageCount: pc\r\n            };\r\n            this.updatePageLinks();\r\n\r\n            this.onPageChange.emit(state);\r\n            this.updatePaginatorState();\r\n        }\r\n    }\r\n\r\n    updateFirst() {\r\n        const page = this.getPage();\r\n        if (page > 0 && this.totalRecords && (this.first >= this.totalRecords)) {\r\n            Promise.resolve(null).then(() => this.changePage(page - 1));\r\n        }\r\n    }\r\n\r\n    getPage(): number {\r\n        return Math.floor(this.first / this.rows);\r\n    }\r\n\r\n    changePageToFirst(event) {\r\n      if (!this.isFirstPage()){\r\n          this.changePage(0);\r\n      }\r\n\r\n      event.preventDefault();\r\n    }\r\n\r\n    changePageToPrev(event) {\r\n        this.changePage(this.getPage() - 1);\r\n        event.preventDefault();\r\n    }\r\n\r\n    changePageToNext(event) {\r\n        this.changePage(this.getPage()  + 1);\r\n        event.preventDefault();\r\n    }\r\n\r\n    changePageToLast(event) {\r\n      if (!this.isLastPage()){\r\n          this.changePage(this.getPageCount() - 1);\r\n      }\r\n\r\n      event.preventDefault();\r\n    }\r\n\r\n    onPageLinkClick(event, page) {\r\n        this.changePage(page);\r\n        event.preventDefault();\r\n    }\r\n\r\n    onRppChange(event) {\r\n        this.changePage(this.getPage());\r\n    }\r\n    \r\n    updatePaginatorState() {\r\n        this.paginatorState = {\r\n            page: this.getPage(),\r\n            pageCount: this.getPageCount(),\r\n            rows: this.rows,\r\n            first: this.first,\r\n            totalRecords: this.totalRecords\r\n        }\r\n    }\r\n\r\n    get currentPageReport() {\r\n        return this.currentPageReportTemplate\r\n                .replace(\"{currentPage}\", String(this.getPage() + 1))\r\n                .replace(\"{totalPages}\", String(this.getPageCount()))\r\n                .replace(\"{first}\", String(this._first + 1))\r\n                .replace(\"{last}\", String(Math.min(this._first + this.rows, this.totalRecords)))\r\n                .replace(\"{rows}\", String(this.rows))\r\n                .replace(\"{totalRecords}\", String(this.totalRecords));\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule,DropdownModule,FormsModule,SharedModule],\r\n    exports: [Paginator,DropdownModule,FormsModule,SharedModule],\r\n    declarations: [Paginator]\r\n})\r\nexport class PaginatorModule { }\r\n"]}