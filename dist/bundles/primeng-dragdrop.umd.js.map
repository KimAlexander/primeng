{"version":3,"file":"primeng-dragdrop.umd.js","sources":["ng://primeng/dragdrop/dragdrop.ts"],"sourcesContent":["import {NgModule,Directive,OnDestroy,AfterViewInit,ElementRef,HostListener,Input,Output,EventEmitter,NgZone} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {DomHandler} from 'primeng/dom';\r\n\r\n@Directive({\r\n    selector: '[pDraggable]'\r\n})\r\nexport class Draggable implements AfterViewInit, OnDestroy {\r\n    \r\n    @Input('pDraggable') scope: string;\r\n        \r\n    @Input() dragEffect: string;\r\n    \r\n    @Input() dragHandle: string;\r\n    \r\n    @Output() onDragStart: EventEmitter<any> = new EventEmitter();\r\n    \r\n    @Output() onDragEnd: EventEmitter<any> = new EventEmitter();\r\n    \r\n    @Output() onDrag: EventEmitter<any> = new EventEmitter();\r\n    \r\n    handle: any;\r\n\r\n    dragListener: any;\r\n\r\n    mouseDownListener: any;\r\n\r\n    mouseUpListener: any;\r\n\r\n    _pDraggableDisabled: boolean;\r\n        \r\n    constructor(public el: ElementRef, public zone: NgZone) {}\r\n\r\n    @Input() get pDraggableDisabled(): boolean {\r\n        return this._pDraggableDisabled;\r\n    }\r\n    set pDraggableDisabled(_pDraggableDisabled:boolean) {\r\n        this._pDraggableDisabled = _pDraggableDisabled;\r\n        \r\n        if (this._pDraggableDisabled) {\r\n            this.unbindMouseListeners();\r\n        }\r\n        else {\r\n            this.el.nativeElement.draggable = true;\r\n            this.bindMouseListeners();\r\n        }\r\n    }\r\n    \r\n    ngAfterViewInit() {\r\n        if (!this.pDraggableDisabled) {\r\n            this.el.nativeElement.draggable = true;\r\n            this.bindMouseListeners();\r\n        }\r\n    }\r\n\r\n    bindDragListener() {\r\n        if (!this.dragListener) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.dragListener = this.drag.bind(this);\r\n                this.el.nativeElement.addEventListener('drag', this.dragListener);\r\n            });\r\n        }\r\n    }\r\n\r\n    unbindDragListener() {\r\n        if (this.dragListener) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.el.nativeElement.removeEventListener('drag', this.dragListener);\r\n                this.dragListener = null;\r\n            });\r\n        }\r\n    }\r\n\r\n    bindMouseListeners() {\r\n        if (!this.mouseDownListener && !this.mouseUpListener) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.mouseDownListener = this.mousedown.bind(this);\r\n                this.mouseUpListener = this.mouseup.bind(this);\r\n                this.el.nativeElement.addEventListener('mousedown', this.mouseDownListener);\r\n                this.el.nativeElement.addEventListener('mouseup', this.mouseUpListener);\r\n            });\r\n        }\r\n    }\r\n\r\n    unbindMouseListeners() {\r\n        if (this.mouseDownListener && this.mouseUpListener) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.el.nativeElement.removeEventListener('mousedown', this.mouseDownListener);\r\n                this.el.nativeElement.removeEventListener('mouseup', this.mouseUpListener);\r\n                this.mouseDownListener = null;\r\n                this.mouseUpListener = null;\r\n            });\r\n        }\r\n    }\r\n\r\n    drag(event) {\r\n        this.onDrag.emit(event);\r\n    }\r\n\r\n    @HostListener('dragstart', ['$event']) \r\n    dragStart(event) {\r\n        if (this.allowDrag() && !this.pDraggableDisabled) {\r\n            if (this.dragEffect) {\r\n                event.dataTransfer.effectAllowed = this.dragEffect;\r\n            }\r\n            event.dataTransfer.setData('text', this.scope);\r\n            \r\n            this.onDragStart.emit(event);\r\n\r\n            this.bindDragListener();\r\n        }\r\n        else {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    @HostListener('dragend', ['$event']) \r\n    dragEnd(event) {\r\n        this.onDragEnd.emit(event);\r\n        this.unbindDragListener();\r\n    }\r\n    \r\n    mousedown(event) {\r\n        this.handle = event.target;\r\n    }\r\n\r\n    mouseup(event) {\r\n        this.handle = null;\r\n    }\r\n    \r\n    allowDrag() : boolean {\r\n        if (this.dragHandle && this.handle)\r\n            return DomHandler.matches(this.handle, this.dragHandle);\r\n        else\r\n            return true;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unbindDragListener();\r\n        this.unbindMouseListeners();\r\n    }\r\n    \r\n}\r\n\r\n@Directive({\r\n    selector: '[pDroppable]'\r\n})\r\nexport class Droppable implements AfterViewInit, OnDestroy {\r\n    \r\n    @Input('pDroppable') scope: string|string[];\r\n\r\n    @Input() pDroppableDisabled: boolean;\r\n        \r\n    @Input() dropEffect: string;\r\n        \r\n    @Output() onDragEnter: EventEmitter<any> = new EventEmitter();\r\n    \r\n    @Output() onDragLeave: EventEmitter<any> = new EventEmitter();\r\n    \r\n    @Output() onDrop: EventEmitter<any> = new EventEmitter();\r\n    \r\n    constructor(public el: ElementRef, public zone: NgZone) {}\r\n\r\n    dragOverListener: any;\r\n\r\n    ngAfterViewInit() {\r\n        if (!this.pDroppableDisabled) {\r\n            this.bindDragOverListener();\r\n        }\r\n    }\r\n\r\n    bindDragOverListener() {\r\n        if (!this.dragOverListener) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.dragOverListener = this.dragOver.bind(this);\r\n                this.el.nativeElement.addEventListener('dragover', this.dragOverListener);\r\n            });\r\n        }\r\n    }\r\n\r\n    unbindDragOverListener() {\r\n        if (this.dragOverListener) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.el.nativeElement.removeEventListener('dragover', this.dragOverListener);\r\n                this.dragOverListener = null;\r\n            });\r\n        }\r\n    }\r\n\r\n    dragOver(event) {\r\n        event.preventDefault();\r\n    }\r\n            \r\n    @HostListener('drop', ['$event'])\r\n    drop(event) {\r\n        if (this.allowDrop(event)) {\r\n            event.preventDefault();\r\n            this.onDrop.emit(event);\r\n        }\r\n    }\r\n    \r\n    @HostListener('dragenter', ['$event']) \r\n    dragEnter(event) {\r\n        event.preventDefault();\r\n        \r\n        if (this.dropEffect) {\r\n            event.dataTransfer.dropEffect = this.dropEffect;\r\n        }\r\n                \r\n        this.onDragEnter.emit(event);\r\n    }\r\n    \r\n    @HostListener('dragleave', ['$event']) \r\n    dragLeave(event) {\r\n        event.preventDefault();\r\n                \r\n        this.onDragLeave.emit(event);\r\n    }\r\n        \r\n    allowDrop(event): boolean {\r\n        let dragScope = event.dataTransfer.getData('text');\r\n        if (typeof (this.scope) == \"string\" && dragScope == this.scope) {\r\n            return true;\r\n        }\r\n        else if (this.scope instanceof Array) {\r\n            for(let j = 0; j < this.scope.length; j++) {\r\n                if (dragScope == this.scope[j]) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unbindDragOverListener();\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Draggable,Droppable],\r\n    declarations: [Draggable,Droppable]\r\n})\r\nexport class DragDropModule { }"],"names":["EventEmitter","DomHandler","ElementRef","NgZone","Input","Output","HostListener","Directive","NgModule","CommonModule"],"mappings":"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"}