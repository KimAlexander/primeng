{"version":3,"file":"primeng-defer.js","sources":["ng://primeng/defer/defer.ts","ng://primeng/defer/primeng-defer.ts"],"sourcesContent":["import {NgModule,Directive,ElementRef,AfterViewInit,OnDestroy,TemplateRef,EmbeddedViewRef,\r\n        ViewContainerRef,Renderer2,EventEmitter,Output,ContentChild} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\n@Directive({\r\n    selector: '[pDefer]'\r\n})\r\nexport class DeferredLoader implements AfterViewInit,OnDestroy {\r\n        \r\n    @Output() onLoad: EventEmitter<any> = new EventEmitter();\r\n    \r\n    @ContentChild(TemplateRef) template: TemplateRef<any>;\r\n        \r\n    documentScrollListener: Function;\r\n    \r\n    view: EmbeddedViewRef<any>;\r\n            \r\n    constructor(public el: ElementRef, public renderer: Renderer2, public viewContainer: ViewContainerRef) {}\r\n    \r\n    ngAfterViewInit() {\r\n        if (this.shouldLoad()) {\r\n            this.load();\r\n        }\r\n        \r\n        if (!this.isLoaded()) {\r\n            this.documentScrollListener = this.renderer.listen('window', 'scroll', () => {\r\n                if (this.shouldLoad()) {\r\n                    this.load();\r\n                    this.documentScrollListener();\r\n                    this.documentScrollListener = null;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    shouldLoad(): boolean {\r\n        if (this.isLoaded()) {\r\n            return false;\r\n        }\r\n        else {\r\n            let rect = this.el.nativeElement.getBoundingClientRect();\r\n            let docElement = document.documentElement;\r\n            let winHeight = docElement.clientHeight;\r\n            \r\n            return (winHeight >= rect.top);\r\n        }\r\n    }\r\n    \r\n    load(): void { \r\n        this.view = this.viewContainer.createEmbeddedView(this.template);\r\n        this.onLoad.emit();\r\n    }\r\n    \r\n    isLoaded() {\r\n        return this.view != null;\r\n    }\r\n            \r\n    ngOnDestroy() {\r\n        this.view = null;\r\n        \r\n        if (this.documentScrollListener) {\r\n            this.documentScrollListener();\r\n        }\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [DeferredLoader],\r\n    declarations: [DeferredLoader]\r\n})\r\nexport class DeferModule { }","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;;;AAAA;IAiBI,wBAAmB,EAAc,EAAS,QAAmB,EAAS,aAA+B;QAAlF,OAAE,GAAF,EAAE,CAAY;QAAS,aAAQ,GAAR,QAAQ,CAAW;QAAS,kBAAa,GAAb,aAAa,CAAkB;QAR3F,WAAM,GAAsB,IAAI,YAAY,EAAE,CAAC;KAQgD;IAEzG,wCAAe,GAAf;QAAA,iBAcC;QAbG,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;YACnB,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;YAClB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE;gBACnE,IAAI,KAAI,CAAC,UAAU,EAAE,EAAE;oBACnB,KAAI,CAAC,IAAI,EAAE,CAAC;oBACZ,KAAI,CAAC,sBAAsB,EAAE,CAAC;oBAC9B,KAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;iBACtC;aACJ,CAAC,CAAC;SACN;KACJ;IAED,mCAAU,GAAV;QACI,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;YACjB,OAAO,KAAK,CAAC;SAChB;aACI;YACD,IAAI,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;YACzD,IAAI,UAAU,GAAG,QAAQ,CAAC,eAAe,CAAC;YAC1C,IAAI,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC;YAExC,QAAQ,SAAS,IAAI,IAAI,CAAC,GAAG,EAAE;SAClC;KACJ;IAED,6BAAI,GAAJ;QACI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;KACtB;IAED,iCAAQ,GAAR;QACI,OAAO,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;KAC5B;IAED,oCAAW,GAAX;QACI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEjB,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC7B,IAAI,CAAC,sBAAsB,EAAE,CAAC;SACjC;KACJ;;gBA9CsB,UAAU;gBAAmB,SAAS;gBAAwB,gBAAgB;;IAR3F;QAAT,MAAM,EAAE;kDAAgD;IAE9B;QAA1B,YAAY,CAAC,WAAW,CAAC;oDAA4B;IAJ7C,cAAc;QAH1B,SAAS,CAAC;YACP,QAAQ,EAAE,UAAU;SACvB,CAAC;OACW,cAAc,CAyD1B;IAAD,qBAAC;CAzDD,IAyDC;;IAOD;KAA4B;IAAf,WAAW;QALvB,QAAQ,CAAC;YACN,OAAO,EAAE,CAAC,YAAY,CAAC;YACvB,OAAO,EAAE,CAAC,cAAc,CAAC;YACzB,YAAY,EAAE,CAAC,cAAc,CAAC;SACjC,CAAC;OACW,WAAW,CAAI;IAAD,kBAAC;CAA5B;;ACvEA;;GAEG;;;;"}